<!DOCTYPE html>
<html lang="ja">
  <!-- HEAD -->

  <head>
    <meta charset="UTF-8" />
    <title>21 - Survival Game -</title>
    <link rel="stylesheet" type="text/css" href="css/gameboard.css" />
    <link rel="stylesheet" type="text/css" href="css/sp_window+cards.css" />
  </head>
  <!-- END of HEAD -->

  <!-- BODY -->

  <body>
    <h1>21</h1>

    <!-- .YOUR or .ENEMY -->
    <div class="container YOUR">
      <div id="infoBoard" class="wrapper">
        <div class="message">
          <p><span class="YOUR">YOUR</span>&nbsp;TURN</p>
        </div>
      </div>
      <!-- ENEMY -->
      <div id="gameBoard" class="wrapper">
        <div class="EN_Hand">
          <img class="Hand" src="img/en/hand.png" alt="Enemy's Hand" />
          <img class="Hand lost" src="img/en/lost/01.png" />
          <img class="Hand lost" src="img/en/lost/02.png" />
          <img class="Hand select" src="img/en/select/03.png" />
          <img class="Hand select" src="img/en/select/04.png" />
        </div>
        <div class="EN_Cards">
          <div class="numCard back"></div>
          <div class="numCard">4</div>
          <div class="numCard">8</div>
        </div>
        <div class="EN_PassiveSP">
          <div class="spCard spID22"></div>
        </div>
        <div class="Blank"></div>
        <div class="EN_countNum"><span>12+?</span>/21</div>
        <!-- END of Enemy's Graphics -->
        <!-- My Graphix -->
        <div class="MY_Hand">
          <img class="Hand" src="img/my/hand.png" alt="My Hand" />
          <img class="Hand lost" src="img/my/lost/01.png" />
          <img class="Hand select" src="img/my/select/02.png" />
          <img class="Hand select" src="img/my/select/03.png" />
        </div>
        <div class="MY_Cards">
          <div class="numCard back">11</div>
          <div class="numCard">7</div>
          <div class="numCard">3</div>
        </div>
        <div class="MY_PassiveSP">
          <div class="spCard spID21"></div>
          <div class="spCard spID21"></div>
        </div>
        <div class="MYInfo">
          <div id="user_info">your_name<br />ID : your_id</div>
        </div>
        <div class="MY_countNum">
          <span class="just">21</span>
        </div>
        <!-- END of My Graphics -->
      </div>
      <!-- END of gameBoard -->

      <hr />

      <div class="MY_Commands">
        <form id="command" action="gameboard.html" method="post">
          <input type="hidden" name="userID" value="$userID" />
          <button type="submit" class="clear_btn" name="stay">STAY</button>
          <button type="submit" class="clear_btn" name="draw">DRAW</button>
        </form>
        <input id="SP_btn" type="checkbox" class="clear_btn" name="SP_Window" />
        <label for="SP_btn">
          <span class="label_SP_btn">SP[--]</span>
        </label>
        <!-- SP_Window -->
        <div id="SP_Window">
          <!-- <div id="sp0" class="spPrev spID12">
            <input type="submit" name="useSP" value="12" form="command" />
          </div>
          <div class="spPrev sp1"></div> -->
        </div>
        <script>
          const MAX_SP_HAND = 16;
          const sp_json = { sp_card: [4, 12, 6, 24, 16, 26] };
          const sp_hand = sp_json.sp_card.sort((a, b) => a - b);

          const SPWindow = document.getElementById("SP_Window");
          const labelSPBtn = document.getElementsByClassName("label_SP_btn")[0];

          // SPカードの所持数をSPボタンのラベルに表示する
          labelSPBtn.textContent = `SP[${sp_hand.length}]`;

          // SPカードのデータを読み込む
          fetch("json/sp_card.json")
            .then((res) => {
              return res.json();
            })
            .then((json) => {
              // SPウィンドウにSPカードを追加する
              for (let i = 0; i < MAX_SP_HAND; i++) {
                const div = document.createElement("div");
                if (i < sp_hand.length) {
                  div.id = `sp${i}`;
                  div.className = `spPrev spID${sp_hand[i]}`;
                } else {
                  div.className = `spPrev sp${i}`;
                }
                SPWindow.appendChild(div);
              }
            });
        </script>
        <script src="js/SPCard.js"></script>
        <script src="js/GameStatus.js"></script>
        <script src="js/main.js"></script>
        <!-- END of SP_Window -->
      </div>
      <!-- END of MY Commands -->
    </div>
    <!-- END of container -->
  </body>
  <!-- END of BODY -->
</html>
